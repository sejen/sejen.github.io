<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DevOps | Jiang Jun Jie's Site</title><meta name=keywords content><meta name=description content="SeJen - https://github.com/sejen"><meta name=author content="Steven Jiang"><link rel=canonical href=https://www.jiangjunjie.cn/categories/devops/><link crossorigin=anonymous href=/assets/css/stylesheet.7140587df96a2b1a49eb723fa7063dc0c641a6cb638f3140e8d3beb4deae4f5c.css integrity="sha256-cUBYfflqKxpJ63I/pwY9wMZBpstjjzFA6NO+tN6uT1w=" rel="preload stylesheet" as=style><link rel=icon href=https://www.jiangjunjie.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.jiangjunjie.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.jiangjunjie.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://www.jiangjunjie.cn/apple-touch-icon.png><link rel=mask-icon href=https://www.jiangjunjie.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://www.jiangjunjie.cn/categories/devops/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="DevOps"><meta property="og:description" content="SeJen - https://github.com/sejen"><meta property="og:type" content="website"><meta property="og:url" content="https://www.jiangjunjie.cn/categories/devops/"><meta property="og:image" content="https://www.jiangjunjie.cn/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.jiangjunjie.cn/papermod-cover.png"><meta name=twitter:title content="DevOps"><meta name=twitter:description content="SeJen - https://github.com/sejen"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.jiangjunjie.cn accesskey=h title="Jiang Jun Jie's Site (Alt + H)">Jiang Jun Jie's Site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.jiangjunjie.cn/archives title=Archive><span>Archive</span></a></li><li><a href=https://www.jiangjunjie.cn/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://www.jiangjunjie.cn/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://www.jiangjunjie.cn>Home</a>&nbsp;»&nbsp;<a href=https://www.jiangjunjie.cn/categories/>Categories</a></div><h1>DevOps
<a href=/categories/devops/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Docker ELK</h2></header><div class=entry-content><p>docker compose files https://github.com/deviantony/docker-elk</p></div><footer class=entry-footer><span title='2022-09-08 11:02:46 +0800 +0800'>September 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker ELK" href=https://www.jiangjunjie.cn/posts/docker-elk/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Docker GeoServer</h2></header><div class=entry-content><p>version: '3.1' services: geoserver: image: geonode/geoserver:2.18.2 container_name: geoserver volumes: - /opt/geoserver/data:/geoserver_data/data ports: - 18080:8080 restart: always</p></div><footer class=entry-footer><span title='2022-09-08 10:54:53 +0800 +0800'>September 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker GeoServer" href=https://www.jiangjunjie.cn/posts/docker-geoserver/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Docker OSM</h2></header><div class=entry-content><p>version: '3.2' services: osm: image: overv/openstreetmap-tile-server:latest container_name: osm volumes: - openstreetmap-data:/var/lib/postgresql/12/main # environment: # - ALLOW_CORS=enabled ports: - 28080:80 restart: always command: "run" networks: - proxy volumes: openstreetmap-data: external: true networks: proxy: external: true</p></div><footer class=entry-footer><span title='2022-09-08 10:53:13 +0800 +0800'>September 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker OSM" href=https://www.jiangjunjie.cn/posts/docker-osm/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Docker Oracle11gR2</h2></header><div class=entry-content><p>version: '3.1' services: oracle-xe: image: gvenzl/oracle-xe:11 container_name: oracle-xe restart: always user: 1000:1000 environment: - ORACLE_PASSWORD={password} volumes: - ./data:/u01/app/oracle/oradata ports: - 1521:1521 network_mode: bridge version: '3.1' services: oracle11g: image: registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g container_name: oracle11g privileged: true ports: - 1521:1521 restart: always volumes: - /home/oracle/oradata:/home/oracle/app/oracle/oradata network_mode: bridge root的默认密码为helowin oracle默认密码为oracle</p></div><footer class=entry-footer><span title='2022-09-08 10:33:04 +0800 +0800'>September 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker Oracle11gR2" href=https://www.jiangjunjie.cn/posts/docker-oracle11gr2/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Docker Keycloak</h2></header><div class=entry-content><p>version: '3' volumes: postgres_data: driver: local services: postgres: image: postgres volumes: - postgres_data:/var/lib/postgresql/data environment: POSTGRES_DB: keycloak POSTGRES_USER: keycloak POSTGRES_PASSWORD: {db password} keycloak: image: quay.io/keycloak/keycloak:legacy environment: DB_VENDOR: POSTGRES DB_ADDR: postgres DB_DATABASE: keycloak DB_USER: keycloak DB_SCHEMA: public DB_PASSWORD: {db password} KEYCLOAK_USER: admin KEYCLOAK_PASSWORD: {password} # Uncomment the line below if you want to specify JDBC parameters. The parameter below is just an example, and it shouldn't be used in production without knowledge. It is highly recommended that you read the PostgreSQL JDBC driver documentation in order to use it....</p></div><footer class=entry-footer><span title='2022-09-08 10:13:00 +0800 +0800'>September 8, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker Keycloak" href=https://www.jiangjunjie.cn/posts/docker-keycloak/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>K8s</h2></header><div class=entry-content><p></p></div><footer class=entry-footer><span title='2021-06-15 15:37:24 +0800 +0800'>June 15, 2021</span>&nbsp;·&nbsp;0 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to K8s" href=https://www.jiangjunjie.cn/posts/k8s/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Nginx</h2></header><div class=entry-content><p>安装和配置Nginx容器 文件目录 /home/nginx/conf.d 用于存放配置文件
/home/nginx/cert 用于存放https证书
/home/nginx/html 用于存放网页文件
/home/nginx/logs 用于存放日志
运行nginx容器 docker run -d \ --name nginx --restart always \ -p 80:80 -p 443:443 \ -e "TZ=Asia/Shanghai" \ -v /home/nginx/nginx.conf:/etc/nginx/nginx.conf \ -v /home/nginx/conf.d:/etc/nginx/conf.d \ -v /home/nginx/logs:/var/log/nginx \ -v /home/nginx/cert:/etc/nginx/cert \ -v /home/nginx/html:/usr/share/nginx/html \ nginx:alpine 配置nginx 这里使用Nginx反向代理访问后端服务，由于容器内部通信，因此需要使用容器的IP，也就是172.17.0.1。 在/home/nginx/conf.d创建一个{name}.conf的配置文件，文件内容如下 server { listen 80; server_name 域名/外网IP; index index.html; root /usr/share/nginx/html/{name}/dist; #dist上传的路径 # 避免访问出现 404 错误 location / { try_files $uri $uri/ @router; index index....</p></div><footer class=entry-footer><span title='2021-03-30 14:19:29 +0800 +0800'>March 30, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Nginx" href=https://www.jiangjunjie.cn/posts/nginx/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Install PostgreSQL in CentOS 7.4</h2></header><div class=entry-content><p>进入PostgreSQL官网：https://www.postgresql.org/download/linux/redhat/ 选择软件版本和系统版本 在服务器上执行脚本，以CentOS7.4和PostgreSQL13为例 # Install the repository RPM: sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm # Install PostgreSQL: sudo yum install -y postgresql13-server # Optionally initialize the database and enable automatic start: sudo /usr/pgsql-13/bin/postgresql-13-setup initdb sudo systemctl enable postgresql-13 sudo systemctl start postgresql-13 远程连接，密码配置 配置文件路径/var/lib/pgsql/13/data/pg_hba.conf。修改127.0.0.1/32为0.0.0.0/0 配置文件路径/var/lib/pgsql/13/data/postgresql.conf。修改listen_address="*",取消port=5432的注释 重启postgresql 配置防火墙，放行5432端口 sudo firewall-cmd --permanent --add-port=5432/tcp sudo firewall-cmd –reload 修改密码 su – postgres psql ALTER USER postgres WITH PASSWORD '这里输入你的密码'; \q exit</p></div><footer class=entry-footer><span title='2021-03-30 14:04:08 +0800 +0800'>March 30, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Install PostgreSQL in CentOS 7.4" href=https://www.jiangjunjie.cn/posts/install-postgresql-in-centos-7.4/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Use Docker to Deploy SpringBoot Jar</h2></header><div class=entry-content><p>构建与启动Java容器。IntelliJ IDEA运行Gradle bootjar命令 将生成的jar包上传到服务器目录，比如/data目录。 在/data目录创建Dockerfile 文件 FROM java:8 ARG JAR_FILE=./*.jar COPY ${JAR_FILE} app.jar ENV TZ=Asia/Shanghai ENTRYPOINT ["java","-jar","/app.jar"] 构建镜像 docker build -t {image}:{tag} . (注意最后有点.) 运行 docker run -d \ --name {name} --restart always \ -p {port}:{port} \ -e "TZ=Asia/Shanghai" \ -e DB_HOST=172.17.0.1 \ -e DB_PWD=mysql_pwd \ -e REDIS_HOST=172.17.0.1 \ -v /data/userData:{镜像内路径} \ {image}:{tag} docker-compose.yml # coming soon</p></div><footer class=entry-footer><span title='2021-03-30 14:03:01 +0800 +0800'>March 30, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Use Docker to Deploy SpringBoot Jar " href=https://www.jiangjunjie.cn/posts/use-docker-to-deploy-springboot-jar-/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Docker MongoDB</h2></header><div class=entry-content><p>start mongodb 4.4 in docker,use ~/mongo/data to persist data docker-compose.yml
version: '3.1' services: mongodb: image: mongo:4.4 command: mongod --auth volumes: - ~/mongo/data:/data/db ports: - 27017:27017 restart: always environment: MONGO_INITDB_ROOT_USERNAME: {username} MONGO_INITDB_ROOT_PASSWORD: {password}</p></div><footer class=entry-footer><span title='2021-03-24 14:57:02 +0800 +0800'>March 24, 2021</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Steven Jiang</footer><a class=entry-link aria-label="post link to Docker MongoDB" href=https://www.jiangjunjie.cn/posts/docker-mongodb/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://www.jiangjunjie.cn/categories/devops/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://www.jiangjunjie.cn>Jiang Jun Jie's Site</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>